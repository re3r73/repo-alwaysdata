<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>√âvaluation FFESSM - Niveau 2</title>
  <style>
    body { font-family: Arial, sans-serif; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f0f0f0; }
    td.state-A { background-color: #b6f1c2; }
    td.state-ECA { background-color: #f9b5b5; }
    td.state-NT { background-color: #ddd; }
    td.label-left { text-align: left; font-weight: bold; color: #004466; background: #e0e0e0; }
    .pe40-header { background-color: #0F4166; color: white; font-weight: bold; text-align: left; padding-left: 10px; }
    .commune-header { background-color: #546B8D; color: white; font-weight: bold; text-align: left; padding-left: 10px; }
    .pa20-header { background-color: #B1B8CB; color: black; font-weight: bold; text-align: left; padding-left: 10px; }
    textarea { width: 98%; height: 4em; resize: vertical; }
    select { font-size: 0.9em; }
    td[data-ipdcell] { cursor: pointer; text-decoration: underline; color: darkblue; }
    td.state-orange { background-color: #ffd580; } /* couleur orange pastel */
  </style>
</head>
<body>
<h2>√âvaluation Niveau 2 - FFESSM</h2>
<br>
<label for="eleveSelect">√âl√®ve :</label>
<select id="eleveSelect">
  <option>-- Choisir un √©l√®ve --</option>
  <option>AINS Mathieu</option>
  <option>BARTHELEMY Carole</option>
  <option>BRAOUDE Dominique</option>
  <option>DE VITI Ga√©tan</option>
  <option>EISNITZ Anne-Laure</option>
  <option>EHRHARD Virginie</option>
  <option>LEPARMENTIER Damien</option>
  <option>MORGAND Claire</option>
  <option>OPIN Maxime</option>
  <option>OURSEL Oxana</option>
  <option>PINHEIRO Tony</option>
  <option>RONDET C√©lian</option>
</select>
<br><br>
<br>
<table id="evaluationTable">
  <tr>
    <th>Comp√©tence</th>
    <th>Plong√©e #1</th>
<th>Plong√©e #2</th>
<th>Plong√©e #3</th>
<th>Plong√©e #4</th>
<th>Plong√©e #5</th>
<th>Plong√©e #6</th>
<th>Plong√©e #7</th>
  </tr>
  <tr class="date-row">
    <td>Date</td>
    <td><input type="date"></td>
<td><input type="date"></td>
<td><input type="date"></td>
<td><input type="date"></td>
<td><input type="date"></td>
<td><input type="date"></td>
<td><input type="date"></td>
  </tr>
  <tr class="evaluateur-row">
    <td>√âvaluateur</td>
    <td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
<td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
<td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
<td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
<td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
<td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
<td><select>
      <option>--</option>
      <option>POUJOL J√©r√©mie (E3)</option>
      <option>VELLUET Philippe (E3)</option>
      <option>COATMEUR Cyrille (E3)</option>
      <option>BEURY Didier (E2)</option>
      <option>BONNET Jean-Philippe (E2)</option>
      <option>BRILL Nicolas (E2)</option>
      <option>GARNIER Laurent (E2)</option>
      <option>MERCIER-GALLAY Jacques (E2)</option>
      <option>MERLE Arthur (E2)</option>
    </select></td>
  </tr>
  <tr><td colspan="8" class="pe40-header">Comp√©tences sp√©cifiques ‚Äî PE40</td></tr>
<tr><td class='label-left'>Ventilation & consommation</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Propulsion & √©quilibrage</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Communication avec GP</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Intervenir en relai sur un √©quipier en difficult√©</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td colspan="8" class="commune-header">Comp√©tences communes ‚Äî</td></tr>
<tr><td class='label-left'>Lestage adapt√©</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>S‚Äô√©quiper & mise √† l‚Äôeau</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Immersion & propulsion</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Respect du milieu</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Vidage de masque</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Retour surface (coh√©sion de la palanqu√©e & vitesse)</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Respect dur√©e & profondeur annonc√©es par le DP</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td colspan="8" class="pa20-header">Comp√©tences sp√©cifiques ‚Äî PA20</td></tr>
<tr><td class='label-left'>Planifier la plong√©e (sur le bateau)</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>V√©rif mat√©riel √©quipiers (buddy check)</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Autonomie (Orientation)</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Autonomie (Conso & D√©co)</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr><td class='label-left'>Parachute</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td><td class='state-NT' onclick='toggleState(this)' data-state='NT'>NT</td></tr>
<tr>
  <td class='label-left'>Intervenir et porter assistance (IPD1)</td>
  <td class='state-NT' data-ipdcell='IPD1_P1' onclick='toggleIPDModal("IPD1_P1")'>‚öôÔ∏è √âvaluer IPD1</td>
  <td class='state-NT' data-ipdcell='IPD1_P2' onclick='toggleIPDModal("IPD1_P2")'>‚öôÔ∏è √âvaluer IPD1</td>
  <td class='state-NT' data-ipdcell='IPD1_P3' onclick='toggleIPDModal("IPD1_P3")'>‚öôÔ∏è √âvaluer IPD1</td>
  <td class='state-NT' data-ipdcell='IPD1_P4' onclick='toggleIPDModal("IPD1_P4")'>‚öôÔ∏è √âvaluer IPD1</td>
  <td class='state-NT' data-ipdcell='IPD1_P5' onclick='toggleIPDModal("IPD1_P5")'>‚öôÔ∏è √âvaluer IPD1</td>
  <td class='state-NT' data-ipdcell='IPD1_P6' onclick='toggleIPDModal("IPD1_P6")'>‚öôÔ∏è √âvaluer IPD1</td>
  <td class='state-NT' data-ipdcell='IPD1_P7' onclick='toggleIPDModal("IPD1_P7")'>‚öôÔ∏è √âvaluer IPD1</td>
</tr>

<tr>
  <td class='label-left'>Intervenir et porter assistance (IPD2)</td>
  <td class='state-NT' data-ipdcell='IPD2_P1' onclick='toggleIPDModal("IPD2_P1")'>‚öôÔ∏è √âvaluer IPD2</td>
  <td class='state-NT' data-ipdcell='IPD2_P2' onclick='toggleIPDModal("IPD2_P2")'>‚öôÔ∏è √âvaluer IPD2</td>
  <td class='state-NT' data-ipdcell='IPD2_P3' onclick='toggleIPDModal("IPD2_P3")'>‚öôÔ∏è √âvaluer IPD2</td>
  <td class='state-NT' data-ipdcell='IPD2_P4' onclick='toggleIPDModal("IPD2_P4")'>‚öôÔ∏è √âvaluer IPD2</td>
  <td class='state-NT' data-ipdcell='IPD2_P5' onclick='toggleIPDModal("IPD2_P5")'>‚öôÔ∏è √âvaluer IPD2</td>
  <td class='state-NT' data-ipdcell='IPD2_P6' onclick='toggleIPDModal("IPD2_P6")'>‚öôÔ∏è √âvaluer IPD2</td>
  <td class='state-NT' data-ipdcell='IPD2_P7' onclick='toggleIPDModal("IPD2_P7")'>‚öôÔ∏è √âvaluer IPD2</td>
</tr>

<tr><td class='label-left'>Remarques</td>
<td><textarea></textarea></td><td><textarea></textarea></td><td><textarea></textarea></td><td><textarea></textarea></td><td><textarea></textarea></td><td><textarea></textarea></td><td><textarea></textarea></td>
</tr>
</table>

<script>
const criteresIPD = [
  {
    famille: "üü© R√©action initiale (4 pts)",
    poids: 4,
    criteres: [
      { nom: "Interpr√©tation du signe (1 pt)" },
      { nom: "Vitesse de r√©action (1 pt)" },
      { nom: "Communication au d√©collage (1 pt)" },
      { nom: "D√©collage ma√Ætris√© (1 pt)" }
    ]
  },
  {
    famille: "üü¶ Prise en charge (3 pts)",
    poids: 3,
    criteres: [
      { nom: "Prise s√©curisante (1 pt)" },
      { nom: "Regard & pr√©sence durant la remont√©e (1 pt)" },
      { nom: "Assiette / confort de l‚Äô√©quipier (1 pt)" }
    ]
  },
  {
    famille: "üüß Contr√¥le de la remont√©e (5 pts)",
    poids: 5,
    criteres: [
      { nom: "Trajectoire stable (1 pt)" },
      { nom: "Vitesse de remont√©e (4 pts)" }
    ]
  },
  {
    famille: "üü® Arr√™ts & rep√®res (4 pts)",
    poids: 4,
    criteres: [
      { nom: "Ralentissement marqu√© zone des 5 m (1 pt)" },
      { nom: "Stop franc entre 5 m et 3 m (2 pts)" },
      { nom: "Tour d‚Äôhorizon + regard (1 pt)" }
    ]
  },
  {
    famille: "üü• Profil & coh√©rence temporelle (4 pts)",
    poids: 4,
    criteres: [
      { nom: "Profil de remont√©e (2 pts)" },
      { nom: "Coh√©rence temporelle de la remont√©e (2 pts)" }
    ]
  }
];

function toggleIPDModal(ref) {
  const modal = document.getElementById("ipdModal");
  const content = document.getElementById("ipdContent");
  modal.style.display = "flex";
  modal.setAttribute("data-cell-ref", ref);

  let html = `<h3>√âvaluation IPD - ${ref}</h3>`;
  html += `<table><tr><th>Famille</th><th>Note /</th></tr>`;

  criteresIPD.forEach((famille, fIdx) => {
    html += `<tr><td style='text-align: left; font-weight: bold;'>${famille.famille}<ul style='list-style-type: disc; padding-left: 20px;'>`;
    famille.criteres.forEach(c => {
      html += `<li style='font-weight: normal; padding-bottom: 2px;'>${c.nom}</li>`;
    });
    html += `</ul></td><td><select class='ipd-note-famille' data-famille='${fIdx}' onchange='majTotalIPD()'>`;
    for (let i = 0; i <= famille.poids; i++) {
      html += `<option value='${i}'>${i}</option>`;
    }
    html += `</select></td></tr>`;
  });

  html += `</table>`;

  html += `<br><p><strong>P√©nalit√© :</strong></p>`;
  html += `<label for='penalite'>Palmage ou regonflage lors de la remont√©e :</label> `;
  html += `<select id='penalite' onchange='majTotalIPD()'>`;
  html += `<option value='0'>0 (aucune p√©nalit√©)</option>`;
  html += `<option value='-1'>-1</option>`;
  html += `<option value='-2'>-2</option>`;
  html += `<option value='-3'>-3</option>`;
  html += `</select><br><br>`;

  html += `<p><strong>Crit√®res √©liminatoires :</strong></p>`;
  html += `<label><input type='checkbox' class='elimCheckbox'> Intervention du moniteur</label><br>`;
  html += `<label><input type='checkbox' class='elimCheckbox'> Redescente > 2m</label><br>`;
  html += `<label><input type='checkbox' class='elimCheckbox'> Percer la surface</label><br><br>`;

  html += `<label><input type='checkbox' id='ipdNotWorked' onchange='majTotalIPD()'> IPD non travaill√©e sur cette plong√©e</label><br><br>`;

  html += `<p><strong>Total</strong> : <span id='ipdTotal'>0</span> / 20</p>`;
  html += `<p><em>Note finale = total - p√©nalit√©, minimum 0</em></p><br>`;

  html += `<button onclick='enregistrerIPD("${ref}")'>Enregistrer</button> `;
  html += `<button onclick='document.getElementById("ipdModal").style.display = "none"'>Fermer</button>`;

  content.innerHTML = html;
}


function enregistrerIPD(ref) {
  const total = parseInt(document.getElementById("ipdTotal").innerText);
  const elimCheck = document.querySelectorAll(".elimCheckbox:checked").length > 0;
  const notWorked = document.getElementById("ipdNotWorked").checked;
  const cell = document.querySelector(`[data-ipdcell='${ref}']`);

  cell.classList.remove("state-A", "state-ECA", "state-orange", "state-NT");

  if (notWorked) {
    cell.classList.add("state-NT");
    cell.innerText = "NT";
  } else if (elimCheck || total < 10) {
    cell.classList.add("state-ECA");
    cell.innerText = `√âliminatoire`;
  } else if (total < 15) {
    cell.classList.add("state-orange");
    cell.innerText = `${total}/20`;
  } else {
    cell.classList.add("state-A");
    cell.innerText = `${total}/20`;
  }

  document.getElementById("ipdModal").style.display = "none";
}

function toggleState(cell) {
  const states = ["NT", "ECA", "A"];
  let currentState = cell.getAttribute("data-state") || "NT";
  let index = states.indexOf(currentState);
  let nextState = states[(index + 1) % states.length];

  cell.classList.remove("state-" + currentState);
  cell.classList.add("state-" + nextState);
  cell.setAttribute("data-state", nextState);
  cell.innerText = nextState;
}

</script>

<div id="ipdModal" class="modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center;">
  <div id="ipdContent" style="background: white; padding: 20px; max-width: 500px; border-radius: 8px;"></div>
</div>

</body>
</html>
